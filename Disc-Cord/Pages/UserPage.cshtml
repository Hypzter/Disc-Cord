@page
@inject UserManager<Models.ApplicationUser> UserManager;
@inject SignInManager<Models.ApplicationUser> SignInManager;
@model Disc_Cord.Pages.UserPageModel
@{
    var user = await UserManager.GetUserAsync(User);
}

<div class="row">
    <div class="col-4">
        <p>@Model.User.Alias</p>
        <br />
        <img src="~/img/@Model.User.ImageUrl" width="300px" />
        <br />
        <p>@Model.User.AboutMe</p>
    </div>
    @*<div class="col-4 offset-2">
        @foreach (var post in Model.Posts)
        {
            <p>@post.Header</p>
        }
    </div>*@
	<div class="col-7 offset-1">
	<div class="card border-2 mb-4">
		<div class="card-header bg-warning text-black fs-4 fw-bold">
			5 senaste inläggen av @Model.User.Alias
		</div>
		<div class="m-0 p-0 text-start">
			<table class="table table-striped m-0 p-0">
				<thead class="bg-black text-white">
					<tr>
						<th>Ämne</th>
					</tr>
				</thead>
				<tbody>
					@foreach (var posts in Model.Posts)
					{
						<tr>
							<td class="col-8">
								<a class="text-black text-decoration-none" asp-route-id="@posts.Id" asp-page="./PostComment">@posts.Header</a>
							</td>
						</tr>
					}
				</tbody>
			</table>
		</div>
		</div>
	</div>
</div>
<br />

@if (SignInManager.IsSignedIn(User))
{
    <form method="post">

        <input asp-for="Message.SenderId" type="hidden" value="@user.Id" />
        <input asp-for="Message.ReceiverId" type="hidden" value="@Model.User.Id" />
        <textarea asp-for="Message.Text" class="form-control" cols="40" rows="5"></textarea>
        <br>
        <input type="submit" name="addTask" value="Skicka" class="btn btn-primary" />

    </form>
}